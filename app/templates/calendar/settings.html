{% extends "base.html" %}

{% block app_content %}
<h1>Calendar settings</h1>

{% if settings.finalized == True %}
<ul class="nav nav-tabs">
    <li>
        <a href="{{ url_for('calendar.view') }}">
            <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
            Public calendar info
        </a>
    </li>
</ul>

<p>info box finalized</p>
{% else %}
<ul class="nav nav-tabs">
    <li>
        <a href="{{ url_for('calendar.check') }}">
            <span class="glyphicon glyphicon-check" aria-hidden="true"></span>
            Check constraints
        </a>
    </li>
    <li>
        <a href="{{ url_for('calendar.preview') }}">
            <span class="glyphicon glyphicon-sunglasses" aria-hidden="true"></span>
            Preview
        </a>
    </li>
</ul>

<p>CALENDAR DESCRIPTION NON_FINALIZED</p>
{% endif %}

<h2>Epochs</h2>

{% if settings.finalized == False %}
<ul class="nav nav-tabs">
    <li>
        <a href="{{ url_for('calendar.epoch_create') }}">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
            New
        </a>
    </li>
</ul>
{% endif %}

<p>EPOCH DESCRIPTION</p>

{% if epochs %}
<table class="table table-hover table-striped">
    <thead>
        <tr>
            <th>Name</th>
            <th>Length</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for epoch in epochs %}
        <tr>
            <td>
            {{ epoch.name }}
            {% if epoch.abbreviation %}
                ({{ epoch.abbreviation }})
            {% endif %}
            </td>
            <td>
                {% if epoch.years > 0 %}
                    {% if epoch.circa %}
                    approx.
                    {% endif %}
                    {{ epoch.years }} years
                {% else %}
                current epoch
                {% endif %}
            </td>
            <td>
                <a href="{{ url_for('calendar.epoch_edit', id=epoch.id) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                    Edit
                </a>

                {% if settings.finalized == False %}
                <a href="{{ url_for('calendar.epoch_up', id=epoch.id) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
                </a>

                <a href="{{ url_for('calendar.epoch_down', id=epoch.id) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
                </a>

                <a href="{{ url_for('calendar.epoch_delete', id=epoch.id) }}" class="btn btn-danger">
                    <span class="glyphicon glyphicon-remove-circle"></span>
                    Delete
                </a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No epochs yet.</p>
{% endif %}

<h2>Months</h2>
{% if settings.finalized == False %}
<ul class="nav nav-tabs">
    <li>
        <a href="{{ url_for('calendar.month_create') }}">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
            New
        </a>
    </li>
</ul>
{% endif %}

<p>MONTHS DESCRIPTION</p>

{% if months %}
<table class="table table-hover table-striped">
    <thead>
        <tr>
            <th>Name</th>
            <th>Length</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for month in months %}
        <tr>
            <td>{{ month.name }}
                {% if month.abbreviation %}
                ({{ month.abbreviation }})
                {% endif %}
            </td>
            <td>
                {{ month.days }} days
            </td>
            <td>
                <a href="{{ url_for('calendar.month_edit', id=month.id) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                    Edit
                </a>

                {% if settings.finalized == False %}
                <a href="{{ url_for('calendar.month_up', id=month.id) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
                </a>

                <a href="{{ url_for('calendar.month_down', id=month.id) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
                </a>

                <a href="{{ url_for('calendar.month_delete', id=month.id) }}" class="btn btn-danger">
                    <span class="glyphicon glyphicon-remove-circle"></span>
                    Delete
                </a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No months yet.</p>
{% endif %}

<h2>Days of the week</h2>
{% if settings.finalized == False %}
<ul class="nav nav-tabs">
    <li>
        <a href="{{ url_for('calendar.day_create') }}">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
            New
        </a>
    </li>
</ul>
{% endif %}

<p>DAY DESCRIPTION</p>

{% if days %}
<table class="table table-hover table-striped">
    <thead>
        <tr>
            <th>Name</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for day in days %}
        <tr>
            <td>{{ day.name }}
                {% if day.abbreviation %}
                    ({{ day.abbreviation }})
                {% endif %}
            </td>
            <td>
                <a href="{{ url_for('calendar.day_edit', id=day.id) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                    Edit
                </a>

                {% if settings.finalized == False %}
                <a href="{{ url_for('calendar.day_up', id=day.id) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
                </a>

                <a href="{{ url_for('calendar.day_down', id=day.id) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
                </a>

                <a href="{{ url_for('calendar.day_delete', id=day.id) }}" class="btn btn-danger">
                    <span class="glyphicon glyphicon-remove-circle"></span>
                    Delete
                </a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No days yet.</p>
{% endif %}
{% endblock %}