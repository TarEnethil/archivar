{% extends "base.html" %}

{% block app_content %}
<h1>Calendar and events</h1>

{% if settings.finalized == False %}
<p class="alert alert-warning">
The calendar has not been finalized by the admin yet.
</p>
{% else %}
<ul class="nav nav-tabs">
    <li>
        <a href="{{ url_for('calendar.view') }}">
            <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
            View info
        </a>
    </li>
    <li>
        <a href="{{ url_for('event.create') }}">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
            New event
        </a>
    </li>
</ul>

<h1>Events by year and epoch</h1>
{% for epoch in epochs %}
<h2><a href="{{ url_for('event.list_epoch', e_id=epoch.id) }}">{{ epoch.name }}</a></h2>

    {% for year in years[epoch.id] %}
        {% if loop.index == 1 %}
        <a href="{{ url_for('event.list_epoch_year', e_id=epoch.id, year=year[0]) }}">{{ year[0] }}</a>
        {% else %}
        &bullet; <a href="{{ url_for('event.list_epoch_year', e_id=epoch.id, year=year[0]) }}">{{ year[0] }}</a>
        {% endif %}
    {% endfor %}

    {% if not years[epoch.id] %}
    <p>No events in this epoch.</p>
    {% endif %}
{% endfor %}
{% endif %}
{% endblock %}