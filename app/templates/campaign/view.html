{% extends "base.html" %}

{% block scripts %}
{{ super() }}
{{ include_js(['moment']) }}
{% endblock %}

{% block app_content %}
<h1>{{ campaign.name }}</h1>

<ul class="nav nav-tabs">
{% if current_user.is_dm_of(campaign) or current_user.has_admin_role() %}
    <li>
        <a href="{{ url_for('session.create', base=campaign.id) }}">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
            New session
        </a>
    </li>
    <li>
        <a href="{{ url_for('campaign.edit', id=campaign.id) }}">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            Edit campaign
        </a>
    </li>
{% endif %}
</ul>

{% if campaign.description %}
<h2>Description</h2>
{% if current_user.markdown_phb_style %}
    <div class="custom-markdown phb-style">
{% else %}
    <div class="custom-markdown">
{% endif %}
{{ campaign.description|markdown }}
    </div>
{% else %}
<p>No description.</p>
{% endif %}

{% if current_user.is_dm_of(campaign) %}
    {% if campaign.dm_notes %}
    <hr>
    <h2>DM Notes</h2>
{% if current_user.markdown_phb_style %}
    <div class="custom-markdown phb-style">
{% else %}
    <div class="custom-markdown">
{% endif %}
{{ campaign.dm_notes|markdown }}
    </div>
    {% endif %}
{% endif %}

<h2>Default participants</h2>
{% if campaign.default_participants %}
<ul class="list-unstyled">
    {% for member in campaign.default_participants %}
    <li><a href="{{ url_for('character.view', id=member.id) }}">{{ member.name }}</a>
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No default participants.</p>
{% endif %}

<!--TODO: SESSIONS-->

{{ campaign.print_info() }}
{% endblock %}