{% extends "base.html" %}

{% block scripts %}
{{ super() }}
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

{% if party.description %}
<script type="text/javascript">
    options = {
        sanitize: true
    }

    var descr = document.getElementById('description')
    descr.innerHTML = marked(descr.innerHTML, options);
</script>

{% endif %}
{% endblock %}

{% block app_content %}
<h1>{{ party.name }}</h1>

{% if current_user.has_admin_role() %}
<a href="{{ url_for('party.edit', id=party.id) }}" class="btn btn-default">
    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
    Edit
</a>
{% endif %}

{% if party.description %}
    <div id="description" class="custom-markdown phb-style">
{{ party.description }}
    </div>
{% else %}
<p>No description.</p>
{% endif %}

<h2>Members</h2>
{% if party.members %}
<ul>
    {% for member in party.members %}
    <li>
        <a href="{{ url_for('character.view', id=member.id) }}">{{ member.name }}</a>
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No members.</p>
{% endif %}
{% endblock %}