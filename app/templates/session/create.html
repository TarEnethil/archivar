{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block styles %}
{{ super() }}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/multi-select/0.9.12/css/multi-select.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css">
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/multi-select/0.9.12/js/jquery.multi-select.min.js"></script>
{{ moment.include_moment() }}
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>

<script>
{% include "simplemde.js" %}
var simplemde = new SimpleMDE(generateSMDEConfig("summary"));

var simplemde = new SimpleMDE(generateSMDEConfig("dm_notes"));

$("#participants").multiSelect( { keepOrder: true, selectableHeader: "Available", selectionHeader: "Participants", cssClass: "partymember-select", selectableOptgroup: true });

moment.updateLocale('en', {
    week: { dow: 1 }
});

$("#date").wrap('<div class="input-group date" id="datetimepicker"></div>');
iga = $("<span/>").addClass("input-group-addon");
$("<span/>").addClass("glyphicon glyphicon-calendar").appendTo(iga);
iga.appendTo($("#datetimepicker"));

var dateformat_string = "YYYY-MM-DD HH:mm"

$(function() {
    $("#datetimepicker").datetimepicker({
        format: dateformat_string
    })
});

$("form").submit(function(e) {
    d = $("#date").val();
    utc_d = moment(d).utc().format(dateformat_string);
    $("#date").val(utc_d);
});
</script>
{% endblock %}

{% block app_content %}
    <h1>Create new session</h1>

    {{ wtf.quick_form(form) }}
{% endblock %}