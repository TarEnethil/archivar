{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block styles %}
{{ super() }}
<link rel="stylesheet" type="text/css" href="{{ url_for('static_files', filename='map.css') }}">
{% endblock %}

{% block content %}
  <div id="map" class="map"></div>
{% endblock %}

{% block scripts %}
{{ super() }}

<script src="{{ url_for('static_files', filename='ol.js') }}"></script>

<script type="module">
    // defines
    var Map = ol.Map
    var TileLayer = ol.layer.Tile
    var XYZ = ol.source.XYZ
    var View = ol.View

    var map = new Map({
        target: 'map',
        layers: [
          new TileLayer({
            source: new XYZ({
              {% if settings.tiles_path %}
              url: '{{ url_for("map.tile", filename="") }}{{ settings.tiles_path }}tile_{z}_{x}-{y}.png'
              {% else %}
              url: '{{ url_for("map.tile", filename="") }}tile_{z}_{x}-{y}.png'
              {% endif %}
            })
          })
        ],
        view: new View({
          center: [-472202, 7530279],
          zoom: {{ settings.default_zoom }}
        })
      });
</script>

{% endblock %}