{% extends "base.html" %}

{% block app_content %}
<h1>Characters and Parties</h1>
<h2>Character</h2>
{% if chars %}
<table class="table">
    <thead>
        <tr>
            <td>Name</td>
            <td>Race</td>
            <td>Class</td>
            <td>Player</td>
            <td>Actions</td>
        </tr>
    </thead>

    {% for char in chars %}
    <tbody>
        <tr>
            <td> {{ char.name }}</td>
            <td> {{ char.race }}</td>
            <td> {{ char.class_ }}</td>
            <td> {{ char.player.username }}</td>
            <td>
                <a href="{{ url_for('character.view', id=char.id) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                    View
                </a>
                <a href="{{ url_for('character.edit', id=char.id) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                    Edit
                </a>
            </td>
        </tr>
    </tbody>
    {% endfor %}
</table>
{% else %}
<p>No character yet.</p>
{% endif %}

<hr>

<h2>Parties</h2>
{% if current_user.has_admin_role() %}
<ul class="nav nav-tabs">
    <li>
        <a href="{{ url_for('party.create') }}"<ul class="nav nav-tabs">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
            Add party
        </a>
    </li>
</ul>
{% endif %}

{% if parties %}
<table class="table">
    <thead>
        <tr>
            <td>Name</td>
            <td>#Members</td>
            <td>Actions</td>
        </tr>
    </thead>

    {% for party in parties %}
    <tbody>
        <tr>
            <td> {{ party.name }}</td>
            <td> {{ party.members|length }}</td>
            <td>
                <a href="{{ url_for('party.view', id=party.id) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                    View
                </a>
                <a href="{{ url_for('party.edit', id=party.id) }}" class="btn btn-default">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                    Edit
                </a>
            </td>
        </tr>
    </tbody>
    {% endfor %}
{% else %}
<p>No parties yet.</p>
{% endif %}
{% endblock %}